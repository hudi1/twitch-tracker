<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Highcharts Example</title>

    <!-- Include Highcharts from CDN -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
</head>
<body>

    <div id="chartContainer" style="height: 400px;"></div>

    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', function () {
            // Fetch data from the Spring Boot API
            fetch('/api/chart/data')
                .then(response => response.json())
                .then(data => {
                    console.log('Fetched Data:', data);

                    // Prepare data for Highcharts
                    var categories = data.map(item => item.time);
                    var seriesData = data.map(item => item.count);

                    console.log('Categories:', categories);
                    console.log('Series Data:', seriesData);

                    // Create Highcharts chart
                    Highcharts.chart('chartContainer', {
                        chart: {
                            type: 'line'
                        },
                        title: {
                            text: 'Time vs Count Chart'
                        },
                        xAxis: {
                            categories: categories
                        },
                        yAxis: {
                            title: {
                                text: 'Count'
                            }
                        },
                        series: [{
                            name: 'Count',
                            data: seriesData
                        }]
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        });
    </script>

</body>
</html>
